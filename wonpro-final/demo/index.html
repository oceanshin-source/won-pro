<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì›ìƒê´€ë¦¬ Pro - ë°ëª¨</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>*{font-family:-apple-system,'Malgun Gothic',sans-serif}.sidebar-item.active{background:rgba(99,102,241,.15);color:#4f46e5;border-right:3px solid #4f46e5}</style>
</head>
<body class="bg-gray-100">
<div id="app"></div>
<script>
const academy={name:'EDUì˜ì–´í•™ì›',owner:'ê¹€ì˜ì–´',code:'DEMO01'};
let page='login',tab='dashboard',attTab='today',chatStudentId='';
let students=[
  {id:'s1',name:'ê¹€ë¯¼ì¤€',course:'ì´ˆë“±ì˜ì–´',fee:180000,paid:true,schedule:{ì›”:'15:00',ìˆ˜:'15:00',ê¸ˆ:'15:00'},points:150},
  {id:'s2',name:'ì´ì„œìœ¤',course:'ì¤‘ë“±ì˜ì–´',fee:220000,paid:true,schedule:{í™”:'17:00',ëª©:'17:00'},points:120},
  {id:'s3',name:'ë°•ì§€í˜¸',course:'í† ìµ',fee:280000,paid:false,schedule:{ì›”:'19:00',ìˆ˜:'19:00',ê¸ˆ:'19:00'},points:80},
  {id:'s4',name:'ìµœìˆ˜ì•„',course:'ì˜ì–´íšŒí™”',fee:250000,paid:true,schedule:{í™”:'10:00',ëª©:'10:00',í† :'10:00'},points:200},
  {id:'s5',name:'ì •ì˜ˆì¤€',course:'ì´ˆë“±ì˜ì–´',fee:180000,paid:false,schedule:{ì›”:'16:00',ìˆ˜:'16:00'},points:60},
  {id:'s6',name:'ê°•í•˜ì€',course:'í† í”Œ',fee:320000,paid:true,schedule:{ì›”:'14:00',í™”:'14:00',ìˆ˜:'14:00'},points:180}
];
let todos=[{id:'t1',text:'ê¹€ë¯¼ì¤€ ì¶œì„ì²´í¬',done:true},{id:'t2',text:'ë°•ì§€í˜¸ ìˆ˜ê°•ë£Œ ì•ˆë‚´',done:false}];
let notices=[{id:'n1',title:'ì„¤ ì—°íœ´ íœ´ì›',content:'2/8~2/12 íœ´ì›',date:'2025-01-25'}];
let makeups=[{id:'m1',student_id:'s2',original_date:'01-28',request_date:'01-30',reason:'ë³‘ì›',status:'ëŒ€ê¸°'}];
let staff=[{id:'st1',name:'ë°•ì„ ìƒ',role:'manager'},{id:'st2',name:'ì´ì„ ìƒ',role:'staff'}];
let attendance={};
const dayList=['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '],today=dayList[new Date().getDay()],yesterday=dayList[(new Date().getDay()+6)%7],tomorrow=dayList[(new Date().getDay()+1)%7];
function getStudentsByDay(d){return students.filter(s=>s.schedule&&s.schedule[d]);}
function render(){document.getElementById('app').innerHTML=page==='login'?renderLogin():renderMain();}

function renderLogin(){
  return `<div class="min-h-screen flex flex-col">
    <a href="https://link.coupang.com/a/example" target="_blank" class="block bg-gradient-to-r from-red-500 to-rose-600 text-white py-3 px-4 text-center">
      <div class="font-bold">ğŸ“š ì˜ì–´êµì¬ ë² ìŠ¤íŠ¸ì…€ëŸ¬ ìµœëŒ€ 50% í• ì¸!</div>
      <div class="text-xs opacity-70">ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤</div>
    </a>
    <div class="flex-1 bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 p-4 flex items-center justify-center">
      <div class="w-full max-w-md">
        <div class="text-center mb-6">
          <div class="w-20 h-20 bg-white rounded-3xl flex items-center justify-center mx-auto mb-4 text-4xl">ğŸ“š</div>
          <h1 class="text-3xl font-bold text-white">${academy.name}</h1>
        </div>
        <div class="bg-amber-400 text-amber-900 rounded-2xl p-3 mb-6 text-center font-bold">ğŸ® ë°ëª¨ ë²„ì „ (ì €ì¥ ì•ˆë¨)</div>
        <button onclick="page='main';render()" class="w-full bg-white rounded-2xl p-4 flex items-center gap-4 hover:bg-gray-50">
          <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center text-2xl">ğŸ‘¨â€ğŸ’¼</div>
          <div class="text-left flex-1"><div class="font-bold">í•™ì› ê´€ë¦¬ìë¡œ ì²´í—˜</div><div class="text-sm text-gray-500">ëª¨ë“  ê¸°ëŠ¥ ë‘˜ëŸ¬ë³´ê¸°</div></div>
          <span class="text-gray-400">â†’</span>
        </button>
        <div class="mt-8 text-center"><a href="../" class="text-indigo-300 text-sm">â† í™ˆìœ¼ë¡œ</a></div>
      </div>
    </div>
  </div>`;
}

function renderMain(){
  const todayS=getStudentsByDay(today),unpaid=students.filter(s=>!s.paid),revenue=students.filter(s=>s.paid).reduce((a,s)=>a+(s.fee||0),0);
  const menus=[
    {id:'dashboard',icon:'ğŸ“Š',label:'ëŒ€ì‹œë³´ë“œ'},
    {id:'students',icon:'ğŸ‘¥',label:'ì›ìƒê´€ë¦¬'},
    {id:'attendance',icon:'ğŸ“…',label:'ì¶œê²°ê´€ë¦¬'},
    {id:'payments',icon:'ğŸ’°',label:'ìˆ˜ê°•ë£Œ'},
    {id:'photos',icon:'ğŸ“¸',label:'ìˆ˜ì—…ì‚¬ì§„',pro:true},
    {id:'makeups',icon:'ğŸ”„',label:'ë³´ê°•ì‹ ì²­',pro:true},
    {id:'points',icon:'ğŸ†',label:'ì¶œì„í¬ì¸íŠ¸',pro:true},
    {id:'notices',icon:'ğŸ“¢',label:'ê³µì§€ì‚¬í•­'},
    {id:'documents',icon:'ğŸ“„',label:'ë¬¸ì„œí…œí”Œë¦¿'},
    {id:'staff',icon:'ğŸ‘”',label:'ì§ì›ê´€ë¦¬',biz:true},
    {id:'settings',icon:'âš™ï¸',label:'ì„¤ì •'}
  ];

  let h='<div class="flex min-h-screen">';
  h+=`<aside class="hidden lg:flex w-64 bg-white border-r flex-col fixed h-full">
    <div class="p-4 border-b"><div class="flex items-center gap-3"><span class="text-2xl">ğŸ“š</span><div><div class="font-bold">${academy.name}</div><div class="text-xs text-amber-500">ğŸ® ë°ëª¨</div></div></div></div>
    <nav class="flex-1 py-2 overflow-y-auto">`;
  menus.forEach(m=>{
    const tag=m.pro?'<span class="ml-2 px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-xs rounded">Pro</span>':m.biz?'<span class="ml-2 px-1.5 py-0.5 bg-purple-100 text-purple-600 text-xs rounded">Biz</span>':'';
    h+=`<button onclick="tab='${m.id}';render()" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 sidebar-item ${tab===m.id?'active':''}"><span class="text-xl">${m.icon}</span><span class="flex-1 text-left text-sm">${m.label}</span>${tag}</button>`;
  });
  h+=`</nav><div class="p-4 border-t"><button onclick="page='login';render()" class="w-full py-2 text-gray-500 text-sm">â† ë¡œê·¸ì•„ì›ƒ</button></div></aside>`;
  
  h+='<main class="flex-1 lg:ml-64 p-4 lg:p-6"><div class="max-w-6xl mx-auto">';
  h+=`<div class="lg:hidden flex items-center justify-between mb-4 bg-white rounded-xl p-3 shadow-sm">
    <span class="font-bold">ğŸ“š ${academy.name}</span>
    <select onchange="tab=this.value;render()" class="border rounded-lg px-2 py-1 text-sm">${menus.map(m=>`<option value="${m.id}" ${tab===m.id?'selected':''}>${m.icon} ${m.label}</option>`).join('')}</select>
  </div>`;

  if(tab==='dashboard'){
    h+=`<div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
      <div class="bg-white rounded-2xl p-5 shadow-sm"><div class="text-gray-500 text-sm">ì „ì²´ ì›ìƒ</div><div class="text-3xl font-bold text-indigo-600">${students.length}ëª…</div></div>
      <div class="bg-white rounded-2xl p-5 shadow-sm"><div class="text-gray-500 text-sm">ì˜¤ëŠ˜ ìˆ˜ì—…</div><div class="text-3xl font-bold text-emerald-600">${todayS.length}ëª…</div></div>
      <div class="bg-white rounded-2xl p-5 shadow-sm"><div class="text-gray-500 text-sm">ë¯¸ë‚©</div><div class="text-3xl font-bold text-rose-500">${unpaid.length}ëª…</div></div>
      <div class="bg-white rounded-2xl p-5 shadow-sm"><div class="text-gray-500 text-sm">ì´ë²ˆë‹¬ ë§¤ì¶œ</div><div class="text-3xl font-bold text-amber-600">${(revenue/10000).toFixed(0)}ë§Œ</div></div>
    </div>
    <div class="grid lg:grid-cols-2 gap-6">
      <div class="bg-white rounded-2xl p-5 shadow-sm">
        <h3 class="font-bold mb-4">ğŸ“… ì˜¤ëŠ˜ ìˆ˜ì—…</h3>
        ${todayS.map(s=>`<div class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50">
          <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold ${attendance[s.id]?'bg-emerald-500 text-white':'bg-gray-100'}">${attendance[s.id]?'âœ“':s.name[0]}</div>
          <div class="flex-1"><div class="font-medium">${s.name}</div><div class="text-xs text-gray-400">${s.schedule[today]} Â· ${s.course}</div></div>
          <button onclick="toggleAtt('${s.id}')" class="px-3 py-1 ${attendance[s.id]?'bg-gray-200':'bg-emerald-500 text-white'} rounded-lg text-sm">${attendance[s.id]?'ì·¨ì†Œ':'ì¶œì„'}</button>
        </div>`).join('')||'<p class="text-gray-400 text-center py-4">ì˜¤ëŠ˜ ìˆ˜ì—… ì—†ìŒ</p>'}
      </div>
      <div class="bg-white rounded-2xl p-5 shadow-sm">
        <h3 class="font-bold mb-4">ğŸ“‹ í•  ì¼</h3>
        ${todos.map(t=>`<div class="flex items-center gap-3 p-2"><button onclick="toggleTodo('${t.id}')" class="w-6 h-6 rounded-full border-2 flex items-center justify-center ${t.done?'bg-emerald-500 border-emerald-500 text-white':'border-gray-300'}">${t.done?'âœ“':''}</button><span class="${t.done?'line-through text-gray-400':''}">${t.text}</span></div>`).join('')}
      </div>
    </div>`;
  }
  else if(tab==='students'){
    h+=`<div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold">ì›ìƒ ëª©ë¡</h2><button onclick="alert('ë°ëª¨ì—ì„œëŠ” ì €ì¥ ì•ˆë¨')" class="px-4 py-2 bg-indigo-600 text-white rounded-xl">+ ì›ìƒ ë“±ë¡</button></div>
    <div class="bg-white rounded-2xl shadow-sm overflow-hidden">`;
    students.forEach(s=>{h+=`<div class="flex items-center gap-4 p-4 border-b hover:bg-gray-50">
      <div class="w-12 h-12 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center text-lg font-bold">${s.name[0]}</div>
      <div class="flex-1"><div class="font-bold">${s.name}</div><div class="text-sm text-gray-500">${s.course}</div></div>
      <div class="text-right"><div class="font-bold">${(s.fee||0).toLocaleString()}ì›</div><div class="text-xs ${s.paid?'text-emerald-600':'text-rose-500'}">${s.paid?'ë‚©ë¶€ì™„ë£Œ':'ë¯¸ë‚©'}</div></div>
    </div>`;});
    h+='</div>';
  }
  else if(tab==='attendance'){
    const tabs=[{id:'yesterday',label:`ì–´ì œ(${yesterday})`},{id:'today',label:`ì˜¤ëŠ˜(${today})`},{id:'tomorrow',label:`ë‚´ì¼(${tomorrow})`}];
    const day=attTab==='yesterday'?yesterday:attTab==='tomorrow'?tomorrow:today;
    const list=getStudentsByDay(day);
    h+=`<div class="bg-white rounded-2xl p-4 mb-4 shadow-sm flex gap-2">${tabs.map(t=>`<button onclick="attTab='${t.id}';render()" class="px-4 py-2 rounded-xl ${attTab===t.id?'bg-indigo-600 text-white':'bg-gray-100'}">${t.label}</button>`).join('')}</div>
    <div class="bg-white rounded-2xl shadow-sm overflow-hidden">`;
    list.forEach(s=>{h+=`<div class="flex items-center gap-4 p-4 border-b">
      <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold ${attendance[s.id]?'bg-emerald-500 text-white':'bg-gray-100'}">${attendance[s.id]?'âœ“':s.name[0]}</div>
      <div class="flex-1"><div class="font-medium">${s.name}</div><div class="text-xs text-gray-400">${s.schedule[day]} Â· ${s.course}</div></div>
      <button onclick="toggleAtt('${s.id}')" class="px-3 py-1 ${attendance[s.id]?'bg-gray-200':'bg-emerald-500 text-white'} rounded-lg text-sm">${attendance[s.id]?'ì·¨ì†Œ':'ì¶œì„'}</button>
    </div>`;});
    if(!list.length)h+='<p class="p-8 text-center text-gray-400">ìˆ˜ì—… ì—†ìŒ</p>';
    h+='</div>';
  }
  else if(tab==='payments'){
    const paid=students.filter(s=>s.paid),unpaidList=students.filter(s=>!s.paid);
    h+=`<div class="grid grid-cols-2 gap-4 mb-6">
      <div class="bg-emerald-50 rounded-2xl p-5"><div class="text-emerald-600 text-sm">ë‚©ë¶€ ì™„ë£Œ</div><div class="text-3xl font-bold text-emerald-700">${paid.length}ëª…</div></div>
      <div class="bg-rose-50 rounded-2xl p-5"><div class="text-rose-600 text-sm">ë¯¸ë‚©</div><div class="text-3xl font-bold text-rose-700">${unpaidList.length}ëª…</div></div>
    </div>`;
    if(unpaidList.length){h+=`<h3 class="font-bold mb-3 text-rose-600">âš ï¸ ë¯¸ë‚©ì</h3><div class="bg-white rounded-2xl shadow-sm overflow-hidden">`;
    unpaidList.forEach(s=>{h+=`<div class="flex items-center gap-4 p-4 border-b">
      <div class="w-10 h-10 bg-rose-100 text-rose-600 rounded-full flex items-center justify-center font-bold">${s.name[0]}</div>
      <div class="flex-1"><div class="font-medium">${s.name}</div></div>
      <div class="font-bold text-rose-600">${(s.fee||0).toLocaleString()}ì›</div>
      <button onclick="togglePaid('${s.id}')" class="px-3 py-1 bg-emerald-500 text-white rounded-lg text-sm">ë‚©ë¶€ì²˜ë¦¬</button>
    </div>`;});h+='</div>';}
  }
  else if(tab==='photos'){
    h+=`<div class="bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl p-6 text-white mb-6"><h3 class="text-xl font-bold">ğŸ“¸ ìˆ˜ì—… ì‚¬ì§„</h3><p class="text-pink-100">í•™ë¶€ëª¨ì—ê²Œ ê³µìœ </p></div>
    <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
      <div class="bg-white rounded-2xl overflow-hidden shadow-sm"><img src="https://via.placeholder.com/400x300/6366f1/white?text=Photo1" class="w-full h-40 object-cover"><div class="p-3"><div class="font-medium">ê¹€ë¯¼ì¤€</div><div class="text-sm text-gray-500">ì—´ê³µì¤‘!</div></div></div>
      <div class="bg-white rounded-2xl overflow-hidden shadow-sm"><img src="https://via.placeholder.com/400x300/10b981/white?text=Photo2" class="w-full h-40 object-cover"><div class="p-3"><div class="font-medium">ìµœìˆ˜ì•„</div><div class="text-sm text-gray-500">íšŒí™” ìˆ˜ì—…</div></div></div>
    </div>`;
  }
  else if(tab==='makeups'){
    h+=`<div class="bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-6 text-white mb-6"><h3 class="text-xl font-bold">ğŸ”„ ë³´ê°• ì‹ ì²­</h3></div>
    <div class="bg-white rounded-2xl shadow-sm overflow-hidden">`;
    makeups.forEach(m=>{const s=students.find(x=>x.id===m.student_id);h+=`<div class="p-4 border-b bg-amber-50"><div class="flex items-center gap-3"><div class="flex-1"><div class="font-medium">${s?.name||''}</div><div class="text-sm text-gray-500">${m.original_date} â†’ ${m.request_date}</div></div><span class="px-3 py-1 rounded-full text-sm bg-amber-100 text-amber-700">${m.status}</span></div></div>`;});
    h+='</div>';
  }
  else if(tab==='points'){
    const sorted=[...students].sort((a,b)=>(b.points||0)-(a.points||0));
    h+=`<div class="bg-gradient-to-r from-yellow-400 to-amber-500 rounded-2xl p-6 text-white mb-6"><h3 class="text-xl font-bold">ğŸ† ì¶œì„ í¬ì¸íŠ¸ ë­í‚¹</h3></div>
    <div class="bg-white rounded-2xl shadow-sm overflow-hidden">`;
    sorted.forEach((s,i)=>{const medal=i===0?'ğŸ¥‡':i===1?'ğŸ¥ˆ':i===2?'ğŸ¥‰':`${i+1}`;h+=`<div class="flex items-center gap-4 p-4 border-b ${i<3?'bg-yellow-50':''}"><div class="w-8 text-center font-bold ${i<3?'text-2xl':''}">${medal}</div><div class="w-10 h-10 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold">${s.name[0]}</div><div class="flex-1 font-medium">${s.name}</div><div class="text-xl font-bold text-indigo-600">${s.points||0}ì </div></div>`;});
    h+='</div>';
  }
  else if(tab==='notices'){
    h+=`<div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold">ê³µì§€ì‚¬í•­</h2><button class="px-4 py-2 bg-indigo-600 text-white rounded-xl">+ ê³µì§€</button></div><div class="space-y-3">`;
    notices.forEach(n=>{h+=`<div class="bg-white rounded-2xl p-5 shadow-sm"><div class="font-bold text-lg">${n.title}</div><div class="text-gray-600 mt-2">${n.content}</div><div class="text-sm text-gray-400 mt-3">${n.date}</div></div>`;});
    h+='</div>';
  }
  else if(tab==='documents'){
    const docs=[{cat:'ì¦ëª…ì„œ',items:['ğŸ“œ ì¬ì›ì¦ëª…ì„œ','ğŸ“ ìˆ˜ë£Œì¦','âœ… ì¶œì„í™•ì¸ì„œ']},{cat:'ì•ˆë‚´ë¬¸',items:['ğŸ’° ìˆ˜ê°•ë£Œì•ˆë‚´','ğŸ–ï¸ íœ´ì›ì•ˆë‚´']},{cat:'ê³„ì•½ì„œ',items:['ğŸ“ ìˆ˜ê°•ê³„ì•½ì„œ','ğŸ”’ ê°œì¸ì •ë³´ë™ì˜ì„œ']},{cat:'ì˜ìˆ˜ì¦',items:['ğŸ§¾ ìˆ˜ê°•ë£Œì˜ìˆ˜ì¦','ğŸ“š êµì¬ë¹„ì˜ìˆ˜ì¦']}];
    docs.forEach(d=>{h+=`<div class="mb-6"><h3 class="font-bold mb-3">${d.cat}</h3><div class="grid grid-cols-2 lg:grid-cols-4 gap-3">${d.items.map(i=>`<div class="bg-white rounded-xl p-4 shadow-sm text-center cursor-pointer hover:bg-indigo-50">${i}</div>`).join('')}</div></div>`;});
  }
  else if(tab==='staff'){
    h+=`<div class="bg-gradient-to-r from-slate-600 to-slate-800 rounded-2xl p-6 text-white mb-6"><div class="flex justify-between"><div><h3 class="text-xl font-bold">ğŸ‘” ì§ì› ê´€ë¦¬</h3></div><div class="text-3xl font-bold">${staff.length}/5</div></div></div>
    <div class="bg-white rounded-2xl shadow-sm overflow-hidden">`;
    staff.forEach(s=>{h+=`<div class="flex items-center gap-4 p-4 border-b"><div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center text-xl font-bold">${s.name[0]}</div><div class="flex-1 font-bold">${s.name}</div><span class="px-3 py-1 rounded-full text-xs ${s.role==='manager'?'bg-purple-100 text-purple-700':'bg-gray-100'}">${s.role==='manager'?'ë§¤ë‹ˆì €':'ì§ì›'}</span></div>`;});
    h+='</div>';
  }
  else if(tab==='settings'){
    h+=`<div class="bg-white rounded-2xl border p-6"><h2 class="font-bold mb-4">ğŸ« í•™ì› ì •ë³´</h2>
    <div class="grid md:grid-cols-2 gap-4">
      <div><label class="text-sm text-gray-600">í•™ì›ëª…</label><input type="text" value="${academy.name}" class="w-full px-4 py-2 border rounded-xl mt-1"></div>
      <div><label class="text-sm text-gray-600">í•™ì› ì½”ë“œ</label><input type="text" value="${academy.code}" class="w-full px-4 py-2 border rounded-xl mt-1 bg-gray-100" readonly></div>
    </div>
    <div class="mt-4 p-4 bg-indigo-50 rounded-xl">
      <p class="text-sm text-indigo-700"><strong>í•™ë¶€ëª¨:</strong> wonpro.pages.dev/p/${academy.code}</p>
      <p class="text-sm text-indigo-700"><strong>í•™ìƒ:</strong> wonpro.pages.dev/s/${academy.code}</p>
    </div></div>`;
  }

  h+='</div></main></div>';
  return h;
}

function toggleAtt(id){if(attendance[id]){delete attendance[id];const s=students.find(x=>x.id===id);if(s)s.points=Math.max(0,(s.points||0)-10);}else{attendance[id]='ì¶œì„';const s=students.find(x=>x.id===id);if(s)s.points=(s.points||0)+10;}render();}
function toggleTodo(id){const t=todos.find(x=>x.id===id);if(t)t.done=!t.done;render();}
function togglePaid(id){const s=students.find(x=>x.id===id);if(s)s.paid=!s.paid;render();}

render();
</script>
</body>
</html>
